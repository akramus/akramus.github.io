webpackJsonp([0xbd61393d1f88],{373:function(n,a){n.exports={data:{markdownRemark:{html:'<p>Functional programming (FP) has been all the rave in recent years, especially in the JavaScript world. When you combine FP with React you get all sorts of magic. It’s also not hard to find FP while traversing (no pun) the React ecosystem. You’ll find <code class="language-text">array.map</code> used very commonly to iterate over props, and return an array of components. You can create a React component as a pure function. Redux commonly uses higher order functions/components. Also if you look at React core you will find a ton of functional programming examples!</p>\n<p>Warning! This blog entry assumes you are familar with basic functional programming concepts. If you need a refresher <a href="https://medium.com/javascript-scene/the-two-pillars-of-javascript-pt-2-functional-programming-a63aa53a41a4">check out JavaScript Guru Eric Elliot\'s blog entry</a>.</p>\n<p>I’ve put together an example that shows how you can use two common functional programming concepts in the context of React. Currying and closures.</p>\n<p>Before I go on to explain the example, let’s first clarify the problem I will be solving.</p>\n<p>Imagine you have a data feed in your UI like Facebook or LinkedIn. The feed takes time to load, but some parts of the feed or page might be ready before others. Why prevent a user from using those parts of the page? Also, sometimes a page load is slower than ideal. After optimization and caching steps are taken, one strategy to increase user experience is to use some type of loading animation. This makes the user feel like they are waiting less time, and it makes the user feel the page is loading and not stalled.</p>\n<p>We’ll use functional programming to create loading components for our main components!</p>\n<p><a href="https://github.com/danielbh/functional-programming-react-loading-component">You can get the finished project here</a></p>\n<p>To get started I recommend you use <a href="https://github.com/facebookincubator/create-react-app">create react app</a>. It\'s the easiest way to bootstrap a React application in your local development environment. Once you\'ve created a new project continue with the tutorial.</p>\n<p>First create the following folders <code class="language-text">src/containers</code> <code class="language-text">src/containers/Panel</code> <code class="language-text">src/utils</code>.</p>\n<p> The first file should be <code class="language-text">src/containers/Panel/loading.js</code>.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token string">\'./index.css\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> ReactLoading <span class="token keyword">from</span> <span class="token string">\'react-loading\'</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">PanelLoading</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"panel"</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>ReactLoading type<span class="token operator">=</span><span class="token string">"bars"</span> color<span class="token operator">=</span><span class="token string">"white"</span> delay<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> PanelLoading</code></pre>\n      </div>\n<p>Here we have our loading component. We use a nifty open source project for creating loading animations called <a href="https://github.com/fakiolinho/react-loading">react-loading</a>. React loading must be added as a dependency with either typing <code class="language-text">yarn add react-loading</code> or npm <code class="language-text">npm i react-loading</code> in the terminal in the root project directory. For the <code class="language-text">ReactLoading</code> component I\'ve made it of type "bar". The loading indicator will be white and there will be no delay for when it starts appearing. By default there is a second delay.</p>\n<p>Now add <code class="language-text">src/containers/Panel/index.css</code>.</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code class="language-css"><span class="token selector">.panel</span> <span class="token punctuation">{</span>\n    <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>\n    <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>\n    <span class="token property">height</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>\n    <span class="token property">margin</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>\n\n    <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>\n    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>\n    <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>\n\n    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> -moz-box<span class="token punctuation">;</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> -ms-flexbox<span class="token punctuation">;</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-flex<span class="token punctuation">;</span>\n    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>This will be the styling for our component. We will give it a blue background and make the text inside have a larger font. We\'ll also use flexbox to center the the children inside the component.</p>\n<p>Now here comes the fun part! <code class="language-text">src/util/compose.js</code> where we will begin using functional programming</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * @param loadingHandler a React component that represents loading state\n * @returns {Function} A React component that has receives fetched data as props\n */</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span>loadingHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Component<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">class</span> <span class="token class-name">Container</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n\n      <span class="token comment">// Need to initialize state initially to avoid not defined error</span>\n      state <span class="token operator">=</span> <span class="token punctuation">{</span>\n        data<span class="token punctuation">:</span> <span class="token keyword">null</span>\n      <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n      <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// Fake API call</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token punctuation">:</span> <span class="token string">"Loaded!"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token function">loadingHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> <span class="token punctuation">(</span>\n          <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> Container<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>The <code class="language-text">compose</code> function takes some data asynchronously whether it be from an http request, a websocket, or something else, and then loads that data into a component that is passed into the returned function. Here we have an example of a closure that holds internal state that can only be accessed by passing in a Component. The method of passing the component in is currying.</p>\n<p>You can see the implementation in <code class="language-text">src/containers/index.js</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> PanelLoading <span class="token keyword">from</span> <span class="token string">\'./loading\'</span>\n<span class="token keyword">import</span> compose <span class="token keyword">from</span> <span class="token string">\'../../utils/compose\'</span>\n<span class="token keyword">import</span> <span class="token string">\'./index.css\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">Panel</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"panel"</span><span class="token operator">></span>\n    <span class="token punctuation">{</span>props<span class="token punctuation">.</span>data<span class="token punctuation">}</span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">compose</span><span class="token punctuation">(</span>PanelLoading<span class="token punctuation">)</span><span class="token punctuation">(</span>Panel<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>Look how elegant that is! Wow! And in such few lines of code!</p>\n<p>Now finish it up by modifying <code class="language-text">src/App.js</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Panel <span class="token keyword">from</span> <span class="token string">\'./containers/Panel\'</span>\n<span class="token keyword">import</span> <span class="token string">\'./App.css\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Panel<span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Panel<span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Panel<span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Panel<span class="token operator">/</span><span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre>\n      </div>\n<p>and <code class="language-text">src/App.css</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code class="language-css"><span class="token selector">.App</span> <span class="token punctuation">{</span>\n  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>\n\n  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>\n  <span class="token property">display</span><span class="token punctuation">:</span> -moz-box<span class="token punctuation">;</span>\n  <span class="token property">display</span><span class="token punctuation">:</span> -ms-flexbox<span class="token punctuation">;</span>\n  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-flex<span class="token punctuation">;</span>\n  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>\n\n  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p><code class="language-text">src/App.css</code> uses flexbox to align the Panel components in rows. Components wrap as the browser window gets narrower.</p>\n<p>Now run the app with <code class="language-text">yarn start</code> or <code class="language-text">npm start</code></p>\n<p>Refresh the page to see see the effect repeat.</p>\n<p>There you have it! Now you have an easy to drop in component that can be used to generate loading animations on components. All of this was written with basic functional programming concepts.</p>\n<p>This example is actually a watered down version of <a href="https://github.com/arunoda/react-komposer">react-komposer</a> an abandoned project by a genius Arunoda Susiripala who was big in the Meteor world before he left Meteor. More recently he’s been working on <a href="https://github.com/zeit/next.js/">Next.js</a> which is a great project for server rendered React. He also is working on <a href="https://github.com/storybooks/storybook">React Storybook</a> which is a sandbox tool for understanding how React components work.</p>\n<p>This is just one of many potential examples of how to apply FP to React. It’s essential to be fluent in functional programming to be not only a good React or JavaScript developer, but to be a good developer period.</p>\n<p>If you have questions or want to talk about FP <a href="/contact/">feel free to contact me</a>.</p>',frontmatter:{title:"Functional Programming with React - A Loading Component Example",date:"07/30/2017"}}},pathContext:{slug:"/blog/fp-react-loading-component/"}}}});
//# sourceMappingURL=path---blog-fp-react-loading-component-31de9a8a553770c1580c.js.map